{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet CreatePostComponent = class CreatePostComponent {\n  constructor(postservice) {\n    this.postservice = postservice;\n    this.postForm = new FormGroup({\n      content: new FormControl(\"\", Validators.required),\n      files: new FormControl(\"\")\n    });\n    this.filesToUpload = [];\n  }\n  createPost(data) {\n    console.log(data);\n    const formData = new FormData();\n    const files = this.filesToUpload;\n    console.log(files);\n    formData.append(\"content\", data['content']);\n    formData.append(\"userId\", localStorage.getItem('userId'));\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i], files[i]['name']);\n    }\n    if (this.postForm.valid) {\n      this.postservice.createPost(formData).subscribe(res => {\n        console.log(res);\n        this.msg = res['msg'];\n      }, err => {\n        console.log(err);\n      });\n    }\n  }\n  selectFiles(event) {\n    console.log(event);\n    this.filesToUpload = event.target.files;\n    //this.product.photo = event.target.files[0]['name'];\n    console.log(\"#####\", this.filesToUpload);\n  }\n};\nCreatePostComponent = __decorate([Component({\n  selector: 'app-create-post',\n  templateUrl: './create-post.component.html',\n  styleUrls: ['./create-post.component.scss']\n})], CreatePostComponent);\nexport { CreatePostComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;AAQ5D,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAS9BC,YAAoBC,WAAuB;IAAvB,gBAAW,GAAXA,WAAW;IAP/B,aAAQ,GAAG,IAAIJ,SAAS,CAAC;MACvBK,OAAO,EAAG,IAAIN,WAAW,CAAC,EAAE,EAAEE,UAAU,CAACK,QAAQ,CAAC;MAClDC,KAAK,EAAG,IAAIR,WAAW,CAAC,EAAE;KAC3B,CAAC;IACF,kBAAa,GAAgB,EAAE;EAGc;EAG7CS,UAAU,CAACC,IAAQ;IACjBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjB,MAAMG,QAAQ,GAAQ,IAAIC,QAAQ,EAAE;IACpC,MAAMN,KAAK,GAAgB,IAAI,CAACO,aAAa;IAC7CJ,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IAClBK,QAAQ,CAACG,MAAM,CAAC,SAAS,EAAEN,IAAI,CAAC,SAAS,CAAC,CAAC;IAC3CG,QAAQ,CAACG,MAAM,CAAC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAEzD,KAAI,IAAIC,CAAC,GAAE,CAAC,EAAEA,CAAC,GAAGX,KAAK,CAACY,MAAM,EAAED,CAAC,EAAE,EAAC;MAChCN,QAAQ,CAACG,MAAM,CAAC,OAAO,EAAER,KAAK,CAACW,CAAC,CAAC,EAAEX,KAAK,CAACW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;;IAExD,IAAG,IAAI,CAACE,QAAQ,CAACC,KAAK,EAAC;MACrB,IAAI,CAACjB,WAAW,CAACI,UAAU,CAACI,QAAQ,CAAC,CAACU,SAAS,CAAEC,GAAO,IAAG;QACzDb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;QAChB,IAAI,CAACC,GAAG,GAAGD,GAAG,CAAC,KAAK,CAAC;MACvB,CAAC,EACAE,GAAG,IAAG;QACLf,OAAO,CAACC,GAAG,CAACc,GAAG,CAAC;MAClB,CAAC,CAAC;;EAEN;EAEAC,WAAW,CAACC,KAAS;IACnBjB,OAAO,CAACC,GAAG,CAACgB,KAAK,CAAC;IAClB,IAAI,CAACb,aAAa,GAAgBa,KAAK,CAACC,MAAM,CAACrB,KAAK;IACpD;IAEAG,OAAO,CAACC,GAAG,CAAC,OAAO,EAAC,IAAI,CAACG,aAAa,CAAC;EACzC;CAED;AA1CYZ,mBAAmB,eAL/BJ,SAAS,CAAC;EACT+B,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,8BAA8B;CAC3C,CAAC,GACW7B,mBAAmB,CA0C/B;SA1CYA,mBAAmB","names":["Component","FormControl","FormGroup","Validators","CreatePostComponent","constructor","postservice","content","required","files","createPost","data","console","log","formData","FormData","filesToUpload","append","localStorage","getItem","i","length","postForm","valid","subscribe","res","msg","err","selectFiles","event","target","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/yash.prajapati/Desktop/Node/Instagram Clone/instagram-ng14/src/app/components/posts/create-post/create-post.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { PostService } from '../post.service';\n\n@Component({\n  selector: 'app-create-post',\n  templateUrl: './create-post.component.html',\n  styleUrls: ['./create-post.component.scss']\n})\nexport class CreatePostComponent {\n\n  postForm = new FormGroup({\n    content : new FormControl(\"\", Validators.required),\n    files : new FormControl(\"\")\n  })\n  filesToUpload: Array<File> = [];\n  msg:any;\n\n  constructor(private postservice:PostService){}\n\n\n  createPost(data:any){\n    console.log(data)\n    const formData: any = new FormData();\n    const files: Array<File> = this.filesToUpload;\n    console.log(files);\n    formData.append(\"content\", data['content'])\n    formData.append(\"userId\", localStorage.getItem('userId'))\n\n    for(let i =0; i < files.length; i++){\n        formData.append(\"files\", files[i], files[i]['name']);\n    }\n    if(this.postForm.valid){\n      this.postservice.createPost(formData).subscribe((res:any)=>{\n        console.log(res)\n        this.msg = res['msg']\n      },\n      (err)=>{\n        console.log(err)\n      })\n    }\n  }\n\n  selectFiles(event:any){\n    console.log(event)\n    this.filesToUpload = <Array<File>>event.target.files;\n    //this.product.photo = event.target.files[0]['name'];\n\n    console.log(\"#####\",this.filesToUpload)\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}