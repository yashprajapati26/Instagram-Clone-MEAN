{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../post.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nfunction CreatePostComponent_h3_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.msg, \" \");\n  }\n}\nexport class CreatePostComponent {\n  constructor(postservice) {\n    this.postservice = postservice;\n    this.postForm = new FormGroup({\n      content: new FormControl(\"\", Validators.required),\n      files: new FormControl(\"\")\n    });\n    this.filesToUpload = [];\n    this.userId = localStorage.getItem['userId'];\n  }\n  createPost(data) {\n    console.log(data);\n    const formData = new FormData();\n    const files = this.filesToUpload;\n    console.log(files);\n    formData.append(\"content\", data['content']);\n    formData.append(\"userId\", localStorage.getItem('userId'));\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i], files[i]['name']);\n    }\n    if (this.postForm.valid) {\n      this.postservice.createPost(formData).subscribe(res => {\n        console.log(res);\n        this.msg = res['msg'];\n      }, err => {\n        console.log(err);\n      });\n    }\n  }\n  selectFiles(event) {\n    console.log(event);\n    this.filesToUpload = event.target.files;\n    //this.product.photo = event.target.files[0]['name'];\n    console.log(\"#####\", this.filesToUpload);\n  }\n}\nCreatePostComponent.ɵfac = function CreatePostComponent_Factory(t) {\n  return new (t || CreatePostComponent)(i0.ɵɵdirectiveInject(i1.PostService));\n};\nCreatePostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreatePostComponent,\n  selectors: [[\"app-create-post\"]],\n  decls: 22,\n  vars: 3,\n  consts: [[1, \"h-screen\", \"bg-gray-200\", \"flex\", \"flex-col\", \"justify-center\", \"items-center\"], [1, \"w-full\", \"max-w-xs\"], [1, \"p-3\", \"bg-white\", \"shadow-md\", \"rounded\", \"my-3\"], [\"class\", \"p-3 bg-green-500 shadow-md rounded my-3\", 4, \"ngIf\"], [\"enctype\", \"multipart/form-data\", 1, \"bg-white\", \"shadow-md\", \"rounded\", \"px-8\", \"pt-6\", \"pb-8\", \"mb-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"mb-4\"], [\"for\", \"username\", 1, \"block\", \"text-gray-700\", \"text-sm\", \"font-bold\", \"mb-2\"], [\"formControlName\", \"content\", \"name\", \"content\", \"placeholder\", \"content\", 1, \"shadow\", \"appearance-none\", \"border\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"leading-tight\", \"focus:outline-none\", \"focus:shadow-outline\"], [1, \"mb-6\", \"flex\"], [\"for\", \"password\", 1, \"block\", \"text-gray-700\", \"text-sm\", \"font-bold\", \"mb-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"strokeWidth\", \"{1.5}\", \"stroke\", \"currentColor\", \"className\", \"w-6 h-6\", 1, \"mx-2\", \"h-4\", 3, \"click\"], [\"strokeLinecap\", \"round\", \"strokeLinejoin\", \"round\", \"d\", \"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13\"], [\"formControlName\", \"files\", \"name\", \"files\", \"type\", \"file\", \"multiple\", \"\", \"hidden\", \"\", 3, \"change\"], [\"file_input\", \"\"], [1, \"flex\", \"items-center\", \"justify-between\"], [\"type\", \"submit\", 1, \"bg-blue-500\", \"hover:bg-blue-700\", \"text-white\", \"font-bold\", \"py-2\", \"px-4\", \"rounded\", \"focus:outline-none\", \"focus:shadow-outline\"], [1, \"text-sm\", \"text-blue-600\", 3, \"routerLink\"], [1, \"p-3\", \"bg-green-500\", \"shadow-md\", \"rounded\", \"my-3\"]],\n  template: function CreatePostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r2 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n      i0.ɵɵtext(3, \"Create New Post \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, CreatePostComponent_h3_4_Template, 2, 1, \"h3\", 3);\n      i0.ɵɵelementStart(5, \"form\", 4);\n      i0.ɵɵlistener(\"ngSubmit\", function CreatePostComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.createPost(ctx.postForm.value);\n      });\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"label\", 6);\n      i0.ɵɵtext(8, \" Content \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"textarea\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"label\", 9);\n      i0.ɵɵtext(12, \" Attach \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(13, \"svg\", 10);\n      i0.ɵɵlistener(\"click\", function CreatePostComponent_Template__svg_svg_click_13_listener() {\n        i0.ɵɵrestoreView(_r2);\n        const _r1 = i0.ɵɵreference(16);\n        return i0.ɵɵresetView(_r1.click());\n      });\n      i0.ɵɵelement(14, \"path\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(15, \"input\", 12, 13);\n      i0.ɵɵlistener(\"change\", function CreatePostComponent_Template_input_change_15_listener($event) {\n        return ctx.selectFiles($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 14)(18, \"button\", 15);\n      i0.ɵɵtext(19, \" Create Post \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"a\", 16);\n      i0.ɵɵtext(21, \"Back to home !\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.msg);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.postForm);\n      i0.ɵɵadvance(15);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/profile/\", ctx.userId, \"\");\n    }\n  },\n  dependencies: [i2.NgIf, i3.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","i0","CreatePostComponent","constructor","postservice","content","required","files","localStorage","getItem","createPost","data","console","log","formData","FormData","filesToUpload","append","i","length","postForm","valid","subscribe","res","msg","err","selectFiles","event","target","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/yash.prajapati/Desktop/Node/Instagram Clone/instagram-ng14/src/app/components/posts/create-post/create-post.component.ts","/home/yash.prajapati/Desktop/Node/Instagram Clone/instagram-ng14/src/app/components/posts/create-post/create-post.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { PostService } from '../post.service';\n\n@Component({\n  selector: 'app-create-post',\n  templateUrl: './create-post.component.html',\n  styleUrls: ['./create-post.component.scss']\n})\nexport class CreatePostComponent {\n\n  postForm = new FormGroup({\n    content : new FormControl(\"\", Validators.required),\n    files : new FormControl(\"\")\n  })\n  filesToUpload: Array<File> = [];\n  msg:any;\n  userId:any = localStorage.getItem['userId']\n\n  constructor(private postservice:PostService){}\n\n\n  createPost(data:any){\n    console.log(data)\n    const formData: any = new FormData();\n    const files: Array<File> = this.filesToUpload;\n    console.log(files);\n    formData.append(\"content\", data['content'])\n    formData.append(\"userId\", localStorage.getItem('userId'))\n\n    for(let i =0; i < files.length; i++){\n        formData.append(\"files\", files[i], files[i]['name']);\n    }\n    if(this.postForm.valid){\n      this.postservice.createPost(formData).subscribe((res:any)=>{\n        console.log(res)\n        this.msg = res['msg']\n      },\n      (err)=>{\n        console.log(err)\n      })\n    }\n  }\n\n  selectFiles(event:any){\n    console.log(event)\n    this.filesToUpload = <Array<File>>event.target.files;\n    //this.product.photo = event.target.files[0]['name'];\n\n    console.log(\"#####\",this.filesToUpload)\n  }\n\n}\n","<div class=\"h-screen bg-gray-200 flex flex-col justify-center items-center\">\n    <div class=\"w-full max-w-xs\">\n        <h3 class=\"p-3 bg-white shadow-md rounded my-3\">Create New Post </h3>\n        <h3 *ngIf=\"msg\" class=\"p-3 bg-green-500 shadow-md rounded my-3\">{{msg}} </h3>\n\n        <form [formGroup]=\"postForm\" (ngSubmit)=\"createPost(postForm.value)\" class=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" enctype=\"multipart/form-data\">\n          <div class=\"mb-4\">\n            <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"username\">\n              Content\n            </label>\n            <textarea formControlName=\"content\" name=\"content\" class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"  placeholder=\"content\"></textarea>\n          </div>\n          <div class=\"mb-6 flex\">\n            <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"password\">\n              Attach\n            </label>\n            <svg (click)=\"file_input.click()\" class=\"mx-2 h-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13\" />\n            </svg>\n            \n            <input (change)=\"selectFiles($event)\" formControlName=\"files\" name=\"files\" type=\"file\" multiple #file_input  hidden>\n          </div>\n          <div class=\"flex items-center justify-between\">\n            <button type=\"submit\" class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\">\n              Create Post\n            </button>\n           \n          </div>\n        </form>\n\n        <a class=\"text-sm text-blue-600\" routerLink=\"/profile/{{userId}}\">Back to home !</a>\n        \n      </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}